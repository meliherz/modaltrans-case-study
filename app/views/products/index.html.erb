<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="mb-0">Products</h1>
    <p class="text-muted mb-0">Manage your products and sync with Google Sheets.</p>
  </div>

  <div class="text-end">
    <span class="badge bg-secondary mb-2 d-block">
      Total products: <%= @products.count %>
    </span>

    <%= link_to "New Product",
                new_product_path,
                class: "btn btn-success" %>
  </div>
</div>

<div class="card mb-4 shadow-sm">
  <div class="card-body d-flex justify-content-between align-items-center">
    <div>
      <h5 class="card-title mb-1">Synchronization</h5>
      <p class="card-text text-muted mb-0">
        Sync products with Google Sheets in either direction.
      </p>
    </div>

    <div class="btn-group" style="gap: 0.5rem;" role="group" aria-label="Sync buttons">
      <%= button_to "Sync FROM Sheet",
                    sync_products_path,
                    method: :post,
                    form: { data: { turbo_confirm: "Sync FROM Google Sheet?" } },
                    class: "btn btn-primary" %>

      <%= button_to "Sync TO Sheet",
                    sync_to_sheet_products_path,
                    method: :post,
                    form: { data: { turbo_confirm: "Sync TO Google Sheet?" } },
                    class: "btn btn-outline-primary" %>
    </div>
  </div>
</div>

<% if @products.any? %>
  <div class="card shadow-sm">
    <div class="card-header">
      <strong>Product List</strong>
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Price</th>
            <th scope="col">Stock</th>
            <th scope="col">Category</th>
            <th scope="col" class="text-end">Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @products.each do |product| %>
            <tr>
              <td><%= product.name %></td>
              <td><%= product.price %></td>
              <td><%= product.stock %></td>
              <td><%= product.category %></td>
              <td class="text-end">
                <%= link_to "Show", product, class: "btn btn-sm btn-outline-secondary me-2" %>
                <%= link_to "Edit", edit_product_path(product), class: "btn btn-sm btn-outline-warning me-2" %>
                <%= link_to "Delete",
                            product,
                            data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
                            class: "btn btn-sm btn-outline-danger" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
  <div class="alert alert-info mt-4">
    There are no products yet.
    Use the <strong>New Product</strong> button or sync from Google Sheet.
  </div>
<% end %>
